{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  
  <!-- CSS for body -->
  <link rel="stylesheet" href="{% static 'base/body.css' %}">
  
  <!-- CSS for header -->
  <link rel="stylesheet" href="{% static 'base/header.css' %}">
  
  <!-- dynamic CSS for certain page -->
  {% for file in cssFiles %}
    <link rel="stylesheet" href="{{ file }}">
  {% endfor %}

  <title>BiblioTech - {{web}}</title>
  <link rel="shortcut icon" href="{% static 'base/favicon.png' %}" type="image/x-icon">
</head>

<body>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <header>
    <a href="{% url 'home:index' %}"><h1>BiblioTech App</h1></a>
    <ul>
      <li><a href="{% url 'home:index' %}">HOME</a></li>
      <li><a href="{% url 'home:gallery' %}">GALLERY</a></li>
      {% if request.user.is_authenticated %}
        <li><a href="{% url 'home:shelf' request.user.id %}">BOOKSHELF</a></li>
        <li><a href="{% url 'user:wall' request.user.id %}">WALL</a></li>
      {% endif %}
      {% if user.is_authenticated %}
      <li>
        <div class="btn-group" style="text-align: left;">
          <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Account
            {% if user.avatar %}
            <img src="/media/{{ user.avatar }}" width=20px height="20px" alt="avatar" class="rounded-circle" style="object-fit: cover;">
            {% else %}
              {% if socialAccount %}
              <img src="{{ socialAccount.get_avatar_url }}" width=20px height="20px" alt="avatar" class="rounded-circle" style="object-fit: cover;">
              {% else %}
              <img src="/media/user/defaultAvatar.jpg"width=20px height="20px" alt="avatar" class="rounded-circle" style="object-fit: cover;">
              {% endif %}
            {% endif %}
          </button>
          {% if request.user.role == 2 and request.user.is_authenticated %}
            <a href="{% url 'control:control' %}" class="btn btn-secondary btn-sm"><i class="fa-solid fa-business-time"></i></a>
          {% endif %}
          <div class="dropdown-menu"  style="text-align-last: left;">
            <a class="dropdown-item" href="{% url 'user:info' %}">Profile</a>
            <a class="dropdown-item" href="{% url 'user:edit' %}">Edit profile</a>
            <a class="dropdown-item" href="{% url 'user:changePassword' %}">Change password</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{% url 'user:logout' %}">Log out</a>
          </div>
        </div>
      </li>
      {% else %}
      <li><a href="{% url 'user:login' %}">LOGIN</a></li>
      <li><a href="{% url 'user:register' %}">REGISTER</a></li>
      {% endif %}
    </ul>
  </header>
  
  {% block content %}
  {% endblock %}
  
  {% for file in jsFiles %}
    <script src="{{ file }}"></script>
  {% endfor %}
  <script src="https://kit.fontawesome.com/177c0b820b.js" crossorigin="anonymous"></script>
</body>
</html>